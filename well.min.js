!function(){"use strict";var t,e,n=function(){},i=function(){},r=Object.keys,o=Object.prototype,s=o.hasOwnProperty,u=o.toString,a=(Function.prototype.bind,function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}});i.prototype.iteratee=function(t,e,n){return this.isFunction(t)?a(t,e,n):this.isObject(t)?this.matches(t):this.property(t)},i.prototype.matches=function(t){var e=this.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var i=0;n>i;i++){var r=e[i],o=r[0];if(r[1]!==t[o]||!(o in t))return!1}return!0}},i.prototype.pairs=function(t){for(var e=this.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},i.prototype.property=function(t){return function(e){return e[t]}},i.prototype.isFunction=function(t){return"function"==typeof t||!1},i.prototype.each=function(t,e,n){if(null==t)return t;e=a(e,n);var i,r=t.length;if(r===+r)for(i=0;r>i;i++)e(t[i],i,t);else{var o=this.keys(t);for(i=0,r=o.length;r>i;i++)e(t[o[i]],o[i],t)}return t},i.prototype.map=function(t,e,n){if(null==t)return[];e=this.iteratee(e,n);for(var i,r=t.length!==+t.length&&this.keys(t),o=(r||t).length,s=Array(o),u=0;o>u;u++)i=r?r[u]:u,s[u]=e(t[i],i,t);return s},i.prototype.has=function(t,e){return null!=t&&s.call(t,e)},i.prototype.keys=function(t){if(!this.isObject(t))return[];if(r)return r(t);var e=[];for(var n in t)this.has(t,n)&&e.push(n);return e},i.prototype.extend=function(t){if(!this.isObject(t))return t;for(var e,n,i=1,r=arguments.length;r>i;i++){e=arguments[i];for(n in e)s.call(e,n)&&(t[n]=e[n])}return t},i.prototype.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},i.prototype.isString=function(t){var e=typeof t;return"string"===e&&!!t},i.prototype.isArray=function(t){return"[object Array]"===u.call(t)},i.prototype.clone=function(t){return this.isObject(t)?this.isArray(t)?t.slice():this.extend({},t):t},i.prototype.some=function(t,e,n){if(null==t)return!1;e=this.iteratee(e,n);var i,r,o=t.length!==+t.length&&this.keys(t),s=(o||t).length;for(i=0;s>i;i++)if(r=o?o[i]:i,e(t[r],r,t))return!0;return!1},i.prototype.find=function(t,e,n){var i;return e=this.iteratee(e,n),this.some(t,function(t,n,r){return e(t,n,r)?(i=t,!0):void 0}),i},i.prototype.filter=function(t,e,n){var i=[];return null==t?i:(e=this.iteratee(e,n),this.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i)},i.prototype.merge=function(){var t=[];return this.each(arguments,function(e){for(var n,i=e.length,r=-1;++r<i;)n=e[r],-1===t.indexOf(n)&&t.push(n)}),t},i.prototype.parseName=function(t){var e=t.split(":"),n=e[e.length-1];return e.splice(-1,1),{alias:e.join(":"),name:n}};var c=c?c:new i,h=function(){var t=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],u=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,u);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}};return{on:function(t,e,n){this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},off:function(t,e,n){var i,r,o,s,u,a,h,f;if(!t&&!e&&!n)return this._events=void 0,this;for(s=t?[t]:c.keys(this._events),u=0,a=s.length;a>u;u++)if(t=s[u],o=this._events[t]){if(this._events[t]=i=[],e||n)for(h=0,f=o.length;f>h;h++)r=o[h],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(e){if(!this._events)return this;var n=[].slice.call(arguments,1),i=this._events[e],r=this._events.all;return i&&t(i,n),r&&t(r,arguments),this}}},f=function(i,r){c.extend(this,{name:i,deps:[],options:{},exportsFn:n});try{r.call(this,t,e)}catch(o){console.log("error in module: "+i)}t.trigger("MODULE_DEFINED",this)};c.extend(f.prototype,{use:function(t,e){return e=e||{},this.deps.push({name:this._toFullName(t),options:e}),this},set:function(t,e){return c.isString(t)&&e&&(this.options[t]=e),c.isObject(t)&&t&&c.extend(this.options,t),this},exports:function(t){return this.exportsFn=t,this},get:function(t){return this.options[t]},init:function(){return this.exportsFn.call(this.get("context")||this)},getAlias:function(){var t=this.name.split(":");return t.splice(-1,1),t.join(":")},getShorthand:function(){var t=this.name.split(":");return t.splice(-1,1)},getDeps:function(){return this.deps},_isShortHand:function(t){return":"===t[0]},_toFullName:function(t){if(!this._isShortHand(t))return t;var e=this.name.split(":");return e.splice(-1,1),e.join(":")+t}});var l=function(n,i,r){return this.modules={},this.names=e.findMissing(n),this.next=i,this.names.length?(t.on("MODULE_DEFINED",this.onModuleDefined,this),this.names=this._extendNames(this.names),this.orderedMods=this.names.slice(0),void this.enqueue(this.names)):i(r,e.pack(n))};c.extend(l.prototype,{isQueueEmpty:function(){return!this.names.length},_extendNames:function(t){return c.map(t,function(t){return c.isString(t)?{name:t,options:{}}:t})},_toPaths:function(e){return c.map(e,function(e){return t.transformToPath(e.name)},this)},_exist:function(t){return!!c.find(this.names,function(e){return t.name===e.name})},_findMissing:function(t){var n=[];return c.each(t,function(t){!this._exist(t)&&!e.exist(t.name)&&n.push(t)},this),n},onModuleDefined:function(t){if(this.isModuleFromThisQueue(t.name)){this.handleModule(t);var e=this._findMissing(t.getDeps());e.length?this.enqueue(e):this.isQueueEmpty()&&this.complete()}},handleModule:function(t){e.add(t);var n,i,r,o=this.names;for(this.modules[t.name]=t,n=0,r=o.length;r>n&&(i=o[n],i.name!==t.name);n++);t.set(i.options),this.names.splice(n,1)},enqueue:function(e){var i=this;return this.names=c.merge(this.names,e),t.vendorRequire(this._toPaths(this.names),n,function(t){i.complete(t)})},complete:function(n){t.off("MODULE_DEFINED",this.onModuleDefined,this),this.initModules();var i=c.extend(this.modules,e.getDeps(this.modules));this.next(n,i)},initModules:function(t,n){var i=this;c.each(t||this.orderedMods,function(t){var r=e.getModule(t.name),o=r.getDeps(),s=t.options.as||c.parseName(t.name).name;o.length&&i.initModules(o,r),n&&i.bindProp(n,s,t.options.autoInit!==!1?r.init():e.get(t.name))})},bindProp:function(t,e,n){t[e]=n},isModuleFromThisQueue:function(t){return!!c.find(this.names,function(e){return e.name===t})}});var p=function(){};c.extend(p.prototype,{modules:{},get:function(t){return this.modules[t].exportsFn},add:function(t){return this.modules[t.name]=t},getModule:function(t){return this.modules[t]},findBy:function(t,e){return c.find(this.modules,function(n){return n.options[t]===e},this)},filterBy:function(t,e){return t&&e?c.filter(this.modules,function(n){return n.props[t]===e},this):void 0},exist:function(t){return!!this.modules[t]},findMissing:function(t){return c.filter(t,function(t){return!this.exist(c.isString(t)?t:t.name)},this)},pack:function(t){var e={};return c.each(t,function(t){e[t]=this.getModule(t)},this),c.extend(e,this.getDeps(e))},getDeps:function(t){var e={};return c.each(t,function(t){c.each(t.deps,function(t){e[t.name]=this.getModule(t.name)},this)},this),e}});var d=function(e,n){t=this,c.extend(this,{isProduction:e.isProduction,options:e,name:e.appName||"WellApp"}),window[this.name]=this,window.wellDefine=this.define.bind(this),"function"==typeof define&&define.amd&&(define.amd=n),this.init()};c.extend(d.prototype,h(),{init:function(){var t=this.options;if(c.isFunction(t.vendorRequire)&&(d.prototype.vendorRequire=t.vendorRequire),c.isFunction(t.requireConfig)&&(d.prototype.requireConfig=t.requireConfig),e=this.Modules=new p(this),this.isProduction||this.requireConfig(t),!t.strategy)return console.log("There is no application strategy defined");var n=this;this.require([t.strategy],function(e){if(e)return console.log("Error in strategy loading! ",e);var i=n.Modules.getModule(t.strategy);i.init()})},define:function(t,e){return new f(t,e),this},transformToPath:function(t){return t?t.split(/(?=[A-Z])/).join("-").toLowerCase().split(":-").join("/"):t},require:function(t,e){return new l(t,e),this},vendorRequire:function(t,e,n){require(t,e,n)},requireConfig:function(t){return requirejs.config({urlArgs:t.cache===!1?(new Date).getTime():"",waitSeconds:60,baseUrl:t.appRoot,paths:{well:t.wellRoot,plugins:t.pluginsRoot,vendor:t.vendorRoot}}),this},transformToName:function(t){return t?(t=this.capitalize(t.replace(/^\//,"").split("/")).join(":"),this.capitalize(t.split("-")).join("")):void 0},capitalize:function(t){return c.map(t,function(t){return t.charAt(0).toUpperCase()+t.slice(1)})}}),new d(window.WellConfig||{})}();